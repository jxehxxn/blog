---
layout: post
title:  "Splunk 시리즈 Part 6: [Hands-on] 운영 효율을 극대화하는 대시보드 제작과 경보 설정"
date:   2025-07-08 11:30:00 +0900
categories: jekyll update
---

## 시작하며: 분석을 넘어 자동화된 모니터링으로

지난 파트에서 우리는 SPL을 사용하여 방대한 데이터 속에서 원하는 정보를 찾아내고 분석하는 방법을 배웠습니다. 하지만 매번 동일한 검색어를 입력하여 분석하는 것은 비효율적입니다. 또한, 시스템을 24시간 내내 지켜보고 있을 수도 없는 노릇입니다.

이번 파트에서는 분석 결과를 **자산화**하고, IT 운영을 **자동화**하는 두 가지 핵심 기능, **대시보드(Dashboard)**와 **경보(Alert)**에 대해 알아봅니다. 잘 만들어진 대시보드는 시스템의 건강 상태를 한눈에 보여주는 조종석이 되고, 자동화된 경보는 장애와 위협을 가장 먼저 알려주는 파수꾼이 될 것입니다.

## 대시보드: 데이터를 한눈에 보여주는 나만의 관제 센터

대시보드는 여러 개의 차트, 통계 테이블, 시각화 자료들을 하나의 화면에 모아놓은 것입니다. IT 운영팀, 보안팀, 개발팀, 심지어 비즈니스 담당자까지 각자의 역할에 맞는 핵심 지표(KPI)들을 대시보드를 통해 실시간으로 모니터링할 수 있습니다.

### [Hands-on] 보안 모니터링 대시보드 만들기

지난 파트에서 분석했던 SPL들을 모아 간단한 보안 모니터링 대시보드를 만들어 보겠습니다.

**1. 패널(Panel)로 저장할 검색 실행**

먼저 대시보드의 한 조각이 될 패널을 만듭니다. 지난 파트에서 만들었던 '시간대별 로그인 실패 추이' 차트를 대시보드에 추가해 보겠습니다.

1.  Search & Reporting 앱에서 다음 SPL을 실행합니다. (시간 범위는 **All time**으로 설정)
    ```spl
    index="tutorial_logs" sourcetype="linux_secure" "Failed password"
    | timechart count
    ```
2.  **Visualization** 탭에서 라인 차트가 보이는지 확인합니다.
3.  검색창 위의 **Save As** 버튼을 클릭하고 **Dashboard Panel**을 선택합니다.

**2. 신규 대시보드 생성 및 패널 추가**

1.  **Dashboard** 옵션에서 **New**를 선택합니다.
2.  **Dashboard Title**에 "실시간 보안 모니터링"이라고 입력합니다.
3.  **Panel Title**에 "시간대별 로그인 실패 추이"라고 입력하고 **Save**를 클릭합니다.
4.  **View Dashboard** 버튼을 누르면, 방금 만든 패널이 포함된 새로운 대시보드가 나타납니다.

**3. 기존 대시보드에 패널 추가하기**

이번에는 '로그인 실패 시도 IP' 통계 테이블을 방금 만든 대시보드에 추가해 보겠습니다.

1.  다음 SPL을 실행하고 **Statistics** 탭으로 전환합니다.
    ```spl
    index="tutorial_logs" sourcetype="linux_secure" "Failed password"
    | stats count by src_ip
    | sort -count
    ```
2.  **Save As > Dashboard Panel**을 클릭합니다.
3.  **Dashboard** 옵션에서 **Existing**을 선택하고, 드롭다운 메뉴에서 방금 만든 "실시간 보안 모니터링" 대시보드를 선택합니다.
4.  **Panel Title**에 "로그인 실패 시도 IP 현황"이라고 입력하고 **Save**를 클릭합니다.

이제 대시보드를 다시 확인해 보면, 두 개의 패널이 나란히 표시되는 것을 볼 수 있습니다. 패널의 크기를 조절하거나 위치를 자유롭게 변경하여 나만의 맞춤형 대시보드를 완성할 수 있습니다.

## 경보: 이상 징후를 자동으로 알려주는 파수꾼

경보는 특정 조건이 충족되었을 때, 지정된 행동(Action)을 자동으로 수행하는 기능입니다. 예를 들어, '1시간마다 검색을 실행해서 로그인 실패가 10번 이상 발견되면', '이메일로 알림을 보내라' 와 같이 설정할 수 있습니다.

### [Hands-on] 특정 계정 로그인 성공 시 경보 설정하기

시스템의 루트(root) 계정으로 로그인이 성공하는 것은 중요한 보안 이벤트일 수 있습니다. 샘플 데이터에 있는 `root` 계정 로그인 성공 이벤트를 탐지하여 알림을 받도록 경보를 설정해 보겠습니다.

**1. 경보를 발생시킬 검색 실행**

먼저 root 계정 로그인 성공 이벤트를 찾는 SPL을 작성합니다.

```spl
index="tutorial_logs" sourcetype="linux_secure" user="root" "Accepted password"
```

**2. 경보 설정**

1.  **Save As** 버튼을 클릭하고 **Alert**를 선택합니다.
2.  **Title**에 "[Security] Root 계정 로그인 성공 탐지"라고 입력합니다.
3.  **Alert type**을 **Scheduled**로 설정합니다. 이는 정해진 주기마다 검색을 실행하여 조건을 확인하는 방식입니다.
    *   **Run on Cron Schedule:** 매시간 5분마다 실행되도록 `*/5 * * * *` 와 같이 설정하거나, **Run every 1 hour** 등 원하는 주기를 선택합니다.
4.  **Trigger condition**을 **Number of Results is greater than 0** 으로 설정합니다. (지난 1시간 동안 검색 결과가 1건이라도 나오면 경보 발생)

**3. 경보 액션(Action) 추가**

경보가 발생했을 때 어떤 행동을 할지 지정합니다.

1.  **+ Add Actions** 버튼을 클릭하고 **Send email**을 선택합니다.
2.  **To** 필드에 알림을 받을 이메일 주소를 입력합니다.
3.  **Subject**와 **Message**를 적절히 채우고, **Include Results**를 체크하여 실제 로그 내용이 이메일에 포함되도록 합니다.
4.  **Save**를 클릭하여 경보 설정을 완료합니다.

이제 Splunk는 매시간마다 자동으로 검색을 실행하여, 지난 1시간 동안 root 계정 로그인 성공 기록이 있는지 확인하고, 만약 있다면 여러분의 이메일함으로 즉시 경보 메일을 발송할 것입니다. 이처럼 스케줄 기반 경보는 실시간성이 아주 중요하지는 않지만 주기적으로 반드시 확인해야 하는 항목을 모니터링하는 데 매우 효과적입니다.

## 다음 이야기

이번 파트에서는 대시보드와 경보 기능을 통해, 일회성 분석을 지속 가능한 모니터링 및 자동화 체계로 발전시키는 방법을 배웠습니다. 이로써 Splunk를 활용한 기본적인 IT 운영 인텔리전스(IT Operations Intelligence) 구축 과정이 마무리되었습니다.

지금까지의 여정을 통해 우리는 Splunk의 기본 개념부터 아키텍처, 데이터 수집, 분석, 시각화, 자동화에 이르는 핵심 기능들을 모두 경험했습니다. 마지막 파트에서는 이 모든 것을 바탕으로 Splunk의 활용 범위를 어떻게 더 확장할 수 있는지, 그리고 앞으로의 학습 방향에 대해 이야기하며 시리즈를 마무리하겠습니다.

다음 파트: **"Splunk 활용의 미래와 다음 단계"**에서 뵙겠습니다.

---
